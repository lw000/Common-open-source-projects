<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sol2 ä½¿ç”¨æŒ‡å—</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: #e0e0ff;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(30, 30, 60, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
        }
        h1 { font-size: 2.5em; color: #6ab7ff; margin-bottom: 10px; }
        .subtitle { font-size: 1.2em; color: #a0a0ff; margin-bottom: 40px; padding-bottom: 20px; border-bottom: 2px solid rgba(100, 150, 255, 0.3); }
        h2 { font-size: 1.8em; color: #4cd1a8; margin-top: 40px; margin-bottom: 20px; }
        h3 { font-size: 1.4em; color: #ff9f7f; margin-top: 30px; margin-bottom: 15px; }
        pre {
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin-bottom: 25px;
            border: 1px solid rgba(100, 150, 255, 0.2);
        }
        pre code { color: #e0e0ff; font-size: 0.9em; line-height: 1.6; }
        .info-box {
            background: rgba(106, 183, 255, 0.15);
            padding: 15px 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid rgba(106, 183, 255, 0.3);
        }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 20px;
            background: rgba(76, 209, 168, 0.2);
            border-radius: 8px;
            color: #4cd1a8;
            text-decoration: none;
        }
        a { color: #4cd1a8; text-decoration: none; }
        a:hover { color: #6ab7ff; }

        footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(76, 209, 168, 0.3);
            text-align: center;
        }

        .footer-text {
            color: #a0a0ff;
            font-size: 0.9em;
            margin: 5px 0;
        }

        .contact-link {
            color: #4cd1a8;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .contact-link:hover {
            color: #ff9f7f;
            text-shadow: 0 0 5px rgba(255, 159, 127, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† è¿”å›åº“åˆ—è¡¨</a>

        <h1>ğŸŒ™ sol2 ä½¿ç”¨æŒ‡å—</h1>
        <p class="subtitle">ç°ä»£ C++/Lua ç»‘å®šåº“</p>

        <div class="info-box">
            <p><strong>é¡¹ç›®åœ°å€ï¼š</strong><a href="https://github.com/ThePhD/sol2" target="_blank">https://github.com/ThePhD/sol2</a></p>
            <p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong><a href="https://sol2.readthedocs.io/" target="_blank">https://sol2.readthedocs.io/</a></p>
        </div>

        <h2>ğŸ“– ä»€ä¹ˆæ˜¯ sol2ï¼Ÿ</h2>
        <p>sol2 æ˜¯ä¸€ä¸ªç°ä»£ã€è½»é‡ã€é«˜æ€§èƒ½çš„ C++17/20 å¤´æ–‡ä»¶åº“ï¼Œç”¨äºåœ¨ C++ å’Œ Lua ä¹‹é—´è¿›è¡Œæ— ç¼äº¤äº’ã€‚å®ƒæ˜¯ solï¼ˆSimple Object Luaï¼‰åº“çš„ç°ä»£ç‰ˆæœ¬ï¼Œæä¾›äº†æ›´ç®€æ´ã€æ›´å®‰å…¨ã€æ›´é«˜æ•ˆçš„ APIã€‚</p>

        <h2>ğŸš€ å®‰è£…æ–¹å¼</h2>

        <h3>å•å¤´æ–‡ä»¶å¼•å…¥</h3>
        <pre><code>// ä¸‹è½½ sol.hpp å¹¶ç›´æ¥åŒ…å«
#include "sol.hpp"</code></pre>

        <h3>ä½¿ç”¨ vcpkg</h3>
        <pre><code>vcpkg install sol2</code></pre>

        <h3>ä½¿ç”¨ Conan</h3>
        <pre><code>conan install sol2/3.3.0@</code></pre>

        <h2>ğŸ’¡ åŸºç¡€ä½¿ç”¨</h2>

        <h3>Hello World</h3>
        <pre><code>#include &lt;iostream&gt;
#include "sol.hpp"

int main() {
    // åˆ›å»º Lua çŠ¶æ€
    sol::state lua;

    // æ‰§è¡Œ Lua ä»£ç 
    lua.script("print('Hello from Lua!')");

    // ä» C++ è°ƒç”¨ Lua å‡½æ•°
    lua.script("function greet(name) return 'Hello, ' .. name .. '!' end");
    std::string greeting = lua["greet"]("World");
    std::cout &lt;&lt; greeting &lt;&lt; std::endl;

    return 0;
}</code></pre>

        <h3>ä» C++ å‘ Lua ä¼ é€’æ•°æ®</h3>
        <pre><code>sol::state lua;

// è®¾ç½®å…¨å±€å˜é‡
lua["x"] = 24;
lua["y"] = 16;
lua["message"] = "Hello from C++";

// æ‰§è¡Œ Lua ä»£ç 
lua.script(R"(
    print(x + y)
    print(message)
    print(x * y)
)");</code></pre>

        <h3>åœ¨ Lua ä¸­è°ƒç”¨ C++ å‡½æ•°</h3>
        <pre><code>// C++ å‡½æ•°
int add(int a, int b) {
    return a + b;
}

std::string greet(const std::string& name) {
    return "Hello, " + name + "!";
}

void print_vector(const std::vector&lt;int&gt;& v) {
    for (int x : v) {
        std::cout &lt;&lt; x &lt;&lt; " ";
    }
    std::cout &lt;&lt; std::endl;
}

int main() {
    sol::state lua;

    // æ³¨å†Œ C++ å‡½æ•°åˆ° Lua
    lua["add"] = add;
    lua["greet"] = greet;
    lua["print_vector"] = print_vector;

    // åœ¨ Lua ä¸­è°ƒç”¨
    lua.script(R"(
        print(add(5, 3))
        print(greet("Lua"))
        print_vector({1, 2, 3, 4, 5})
    )");

    return 0;
}</code></pre>

        <h3>ä» C++ åˆ›å»º Lua è¡¨</h3>
        <pre><code>sol::state lua;

// åˆ›å»ºè¡¨
sol::table config = lua.create_table();
config["width"] = 1920;
config["height"] = 1080;
config["fullscreen"] = true;

// åˆ›å»ºåµŒå¥—è¡¨
config["display"] = lua.create_table_with(
    "brightness", 0.8,
    "contrast", 1.2
);

// åœ¨ Lua ä¸­è®¿é—®
lua.script(R"(
    print(config.width)
    print(config.height)
    print(config.display.brightness)
)");</code></pre>

        <h3>ä» Lua è·å–å¤æ‚æ•°æ®</h3>
        <pre><code>lua.script(R"(
    player = {
        name = "John",
        level = 25,
        inventory = {"sword", "shield", "potion"}
    }
)");

// è·å–è¡¨
sol::table player = lua["player"];
std::string name = player["name"];
int level = player["level"];

// è·å–æ•°ç»„
std::vector&lt;std::string&gt; inventory = player["inventory"];

std::cout &lt;&lt; "Name: " &lt;&lt; name &lt;&lt; ", Level: " &lt;&lt; level &lt;&lt; std::endl;
for (const auto& item : inventory) {
    std::cout &lt;&lt; "Item: " &lt;&lt; item &lt;&lt; std::endl;
}</code></pre>

        <h3>C++ ç±»ç»‘å®šåˆ° Lua</h3>
        <pre><code>#include &lt;iostream&gt;
#include &lt;string&gt;
#include "sol.hpp"

// C++ ç±»
class Player {
private:
    std::string name_;
    int health_;

public:
    Player(const std::string& name, int health)
        : name_(name), health_(health) {}

    void attack(int damage) {
        std::cout &lt;&lt; name_ &lt;&lt; " attacks for " &lt;&lt; damage &lt;&lt; " damage!" &lt;&lt; std::endl;
    }

    void heal(int amount) {
        health_ += amount;
        std::cout &lt;&lt; name_ &lt;&lt; " heals for " &lt;&lt; amount &lt;&lt; " HP!" &lt;&lt; std::endl;
    }

    std::string getName() const { return name_; }
    int getHealth() const { return health_; }
};

int main() {
    sol::state lua;

    // ç»‘å®šç±»åˆ° Lua
    lua.new_usertype&lt;Player&gt;("Player",
        // æ„é€ å‡½æ•°
        sol::constructors&lt;Player(const std::string&, int)&gt;(),
        // å±æ€§
        "name", &Player::getName,
        "health", &Player::getHealth,
        // æ–¹æ³•
        "attack", &Player::attack,
        "heal", &Player::heal
    );

    // åœ¨ Lua ä¸­ä½¿ç”¨
    lua.script(R"(
        local player = Player.new("Hero", 100)
        print(player.name)
        print("Health:", player.health)
        
        player:attack(25)
        player:heal(10)
    )");

    return 0;
}</code></pre>

        <h3>ä½¿ç”¨ Lua è¡¨ä½œä¸ºé…ç½®</h3>
        <pre><code>// åŠ è½½é…ç½®æ–‡ä»¶
lua.script_file("config.lua");

// è¯»å–é…ç½®
std::string server = lua["config"]["server"];
int port = lua["config"]["port"];
bool debug = lua["config"]["debug"];

std::cout &lt;&lt; "Server: " &lt;&lt; server &lt;&lt; ":" &lt;&lt; port &lt;&lt; std::endl;
std::cout &lt;&lt; "Debug: " &lt;&lt; (debug ? "on" : "off") &lt;&lt; std::endl;

/*
-- config.lua å†…å®¹
config = {
    server = "localhost",
    port = 8080,
    debug = true,
    log_file = "app.log"
}
*/</code></pre>

        <h3>è°ƒç”¨ Lua è„šæœ¬æ–‡ä»¶</h3>
        <pre><code>lua.script_file("game_logic.lua");

// è„šæœ¬ä¸­å®šä¹‰çš„å‡½æ•°
auto initGame = lua["initGame"];
auto updateGame = lua["updateGame"];
auto processInput = lua["processInput"];

// è°ƒç”¨ Lua å‡½æ•°
initGame();
updateGame(0.016f);  // delta time
processInput("W", "up");

/* 
-- game_logic.lua å†…å®¹
function initGame()
    print("Game initialized!")
end

function updateGame(dt)
    print("Update: " .. dt)
end

function processInput(key, action)
    print("Key: " .. key .. ", Action: " .. action)
end
*/</code></pre>

        <h3>å¼‚å¸¸å¤„ç†</h3>
        <pre><code>sol::state lua;

// æ•è· Lua é”™è¯¯
try {
    lua.script("this is invalid lua code");
} catch (sol::error& e) {
    std::cerr &lt;&lt; "Lua é”™è¯¯: " &lt;&lt; e.what() &lt;&lt; std::endl;
}

// å®‰å…¨æ‰§è¡Œ
auto result = lua.safe_script("return 1 + 1");
if (result.valid()) {
    std::cout &lt;&lt; "ç»“æœ: " &lt;&lt; result.get&lt;int&gt;() &lt;&lt; std::endl;
} else {
    sol::error err = result;
    std::cerr &lt;&lt; "æ‰§è¡Œå¤±è´¥: " &lt;&lt; err.what() &lt;&lt; std::endl;
}</code></pre>

        <h2>ğŸ¯ sol2 ä¸»è¦ç‰¹æ€§</h2>
        <ul style="margin-left: 20px; color: #d0d0ff;">
            <li><strong>çº¯å¤´æ–‡ä»¶ï¼š</strong>æ— éœ€ç¼–è¯‘ï¼Œç›´æ¥åŒ…å«å³å¯ä½¿ç”¨</li>
            <li><strong>ç±»å‹å®‰å…¨ï¼š</strong>ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯</li>
            <li><strong>é›¶å¼€é”€ï¼š</strong>æ¥è¿‘åŸç”Ÿ Lua C API çš„æ€§èƒ½</li>
            <li><strong>ç°ä»£ C++ï¼š</strong>å……åˆ†åˆ©ç”¨ C++17/20 ç‰¹æ€§</li>
            <li><strong>å¼‚å¸¸å®‰å…¨ï¼š</strong>æ”¯æŒå¼‚å¸¸å¤„ç†å’Œé”™è¯¯æ¢å¤</li>
        </ul>

        <h2>ğŸ“š æ›´å¤šèµ„æº</h2>
        <ul>
            <li><a href="https://sol2.readthedocs.io/" target="_blank">å®˜æ–¹æ–‡æ¡£</a></li>
            <li><a href="https://github.com/ThePhD/sol2" target="_blank">GitHub ä»“åº“</a></li>
            <li><a href="https://github.com/ThePhD/sol2/tree/develop/examples" target="_blank">å®˜æ–¹ç¤ºä¾‹</a></li>
        </ul>

        <!-- é¡µè„š -->
        <footer>
            <p class="footer-text">&copy; 2026 C++ å¼€æºåº“ç²¾é€‰åŸºåœ°. ç‰ˆæƒæ‰€æœ‰Â·LEVI</p>
            <p class="footer-text">å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»: <a href="mailto:373102227@qq.com" class="contact-link">373102227@qq.com</a></p>
        </footer>
    </div>
</body>
</html>
