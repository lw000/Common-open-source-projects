<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cpp-httplib åº“ä½¿ç”¨æŒ‡å—</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: #e0e0ff;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(30, 30, 60, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
        }
        h1 { font-size: 2.5em; color: #6ab7ff; margin-bottom: 10px; }
        .subtitle { font-size: 1.2em; color: #a0a0ff; margin-bottom: 40px; padding-bottom: 20px; border-bottom: 2px solid rgba(100, 150, 255, 0.3); }
        h2 { font-size: 1.8em; color: #4cd1a8; margin-top: 40px; margin-bottom: 20px; }
        h3 { font-size: 1.4em; color: #ff9f7f; margin-top: 30px; margin-bottom: 15px; }
        pre {
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin-bottom: 25px;
            border: 1px solid rgba(100, 150, 255, 0.2);
        }
        pre code { color: #e0e0ff; font-size: 0.9em; line-height: 1.6; }
        .info-box {
            background: rgba(106, 183, 255, 0.15);
            padding: 15px 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid rgba(106, 183, 255, 0.3);
        }
        .back-link {
            position: fixed;
            right: 30px;
            top: 30px;
            z-index: 1000;
            padding: 12px 24px;
            background: rgba(76, 209, 168, 0.15);
            border: 2px solid rgba(76, 209, 168, 0.3);
            border-radius: 25px;
            color: #4cd1a8;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }
        .back-link:hover {
            background: rgba(76, 209, 168, 0.25);
            border-color: rgba(76, 209, 168, 0.5);
            box-shadow: 0 6px 20px rgba(76, 209, 168, 0.4);
            transform: translateY(-2px);
        }
        a { color: #4cd1a8; text-decoration: none; }
        a:hover { color: #6ab7ff; }

        footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(76, 209, 168, 0.3);
            text-align: center;
        }

        .footer-text {
            color: #a0a0ff;
            font-size: 0.9em;
            margin: 5px 0;
        }

        .contact-link {
            color: #4cd1a8;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .contact-link:hover {
            color: #ff9f7f;
            text-shadow: 0 0 5px rgba(255, 159, 127, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† è¿”å›åº“åˆ—è¡¨</a>

        <h1>ğŸŒ cpp-httplib ä½¿ç”¨æŒ‡å—</h1>
        <p class="subtitle">è½»é‡çº§ C++ HTTP/HTTPS åº“</p>

        <div class="info-box">
            <p><strong>é¡¹ç›®åœ°å€ï¼š</strong><a href="https://github.com/yhirose/cpp-httplib" target="_blank">https://github.com/yhirose/cpp-httplib</a></p>
        </div>

        <h2>ğŸ“– ä»€ä¹ˆæ˜¯ cpp-httplibï¼Ÿ</h2>
        <p>cpp-httplib æ˜¯ä¸€ä¸ªä»…å¤´æ–‡ä»¶çš„ C++ HTTP/HTTPS åº“ï¼Œå¯ä»¥å¿«é€Ÿæ­å»º HTTP æœåŠ¡å™¨æˆ–å‘èµ·å®¢æˆ·ç«¯è¯·æ±‚ã€‚å®ƒç®€å•æ˜“ç”¨ï¼Œæ— éœ€å¤æ‚çš„ä¾èµ–é…ç½®ã€‚</p>

        <h2>ğŸš€ å®‰è£…æ–¹å¼</h2>

        <h3>ä¸‹è½½å¤´æ–‡ä»¶</h3>
        <pre><code># ä¸‹è½½ httplib.h
wget https://raw.githubusercontent.com/yhirose/cpp-httplib/master/httplib.h

# æˆ–ä½¿ç”¨ vcpkg
vcpkg install cpp-httplib</code></pre>

        <h2>ğŸ’¡ åŸºç¡€ä½¿ç”¨</h2>

        <h3>åˆ›å»ºç®€å•çš„ HTTP æœåŠ¡å™¨</h3>
        <pre><code>#include &lt;iostream&gt;
#include "httplib.h"

int main() {
    httplib::Server server;

    // å®šä¹‰ GET è·¯ç”±
    server.Get("/hi", [](const httplib::Request& req, httplib::Response& res) {
        res.set_content("Hello World!", "text/plain");
    });

    // å®šä¹‰å¸¦å‚æ•°çš„ GET è·¯ç”±
    server.Get(R"(/numbers/(\d+))", [](const httplib::Request& req, httplib::Response& res) {
        auto numbers = req.matches[1];
        res.set_content("Number: " + numbers, "text/plain");
    });

    // å®šä¹‰ POST è·¯ç”±
    server.Post("/post", [](const httplib::Request& req, httplib::Response& res) {
        res.set_content(req.body, "text/plain");
    });

    // ç›‘å¬ç«¯å£
    server.listen("0.0.0.0", 8080);

    return 0;
}</code></pre>

        <h3>è¿”å› JSON å“åº”</h3>
        <pre><code>#include "httplib.h"
#include &lt;nlohmann/json.hpp&gt;

using json = nlohmann::json;

int main() {
    httplib::Server server;

    server.Get("/api/data", [](const httplib::Request& req, httplib::Response& res) {
        json data = {
            {"name", "John"},
            {"age", 25},
            {"city", "Beijing"}
        };

        res.set_header("Content-Type", "application/json");
        res.set_content(data.dump(), "application/json");
    });

    server.listen("0.0.0.0", 8080);
    return 0;
}</code></pre>

        <h3>è·å–è¯·æ±‚å‚æ•°</h3>
        <pre><code>server.Get("/search", [](const httplib::Request& req, httplib::Response& res) {
    // è·å–æŸ¥è¯¢å‚æ•°
    auto q = req.get_param_value("q");
    auto page = req.get_param_value("page");

    std::string result = "Search: " + q + ", Page: " + page;
    res.set_content(result, "text/plain");
});

// è·å– Header
server.Get("/info", [](const httplib::Request& req, httplib::Response& res) {
    auto user_agent = req.get_header_value("User-Agent");
    res.set_content("User-Agent: " + user_agent, "text/plain");
});</code></pre>

        <h3>é™æ€æ–‡ä»¶æœåŠ¡</h3>
        <pre><code>httplib::Server server;

// è®¾ç½®é™æ€æ–‡ä»¶ç›®å½•
server.set_mount_point("/public", "./public");

// è®¾ç½®åŸºç¡€ç›®å½•
server.set_base_dir("./www");

// å•æ–‡ä»¶æœåŠ¡
server.Get("/download", [](const httplib::Request& req, httplib::Response& res) {
    auto ret = res.set_file_content("test.pdf", "application/pdf");
    if (!ret) {
        res.set_content("File not found", "text/plain");
        res.status = 404;
    }
});</code></pre>

        <h3>HTTPS æœåŠ¡å™¨</h3>
        <pre><code>#include "httplib.h"

int main() {
    httplib::SSLServer svr("./cert.pem", "./key.pem");

    svr.Get("/secure", [](const httplib::Request& req, httplib::Response& res) {
        res.set_content("Secure Connection!", "text/plain");
    });

    svr.listen("0.0.0.0", 443);
    return 0;
}</code></pre>

        <h3>HTTP å®¢æˆ·ç«¯</h3>
        <pre><code>#include "httplib.h"
#include &lt;iostream&gt;

int main() {
    httplib::Client client("httpbin.org", 80);

    // GET è¯·æ±‚
    auto res = client.Get("/get");
    if (res && res->status == 200) {
        std::cout &lt;&lt; res->body &lt;&lt; std::endl;
    }

    // POST è¯·æ±‚
    httplib::Params params{
        {"name", "John"},
        {"age", "25"}
    };
    res = client.Post("/post", params);

    // POST JSON
    res = client.Post("/post", R"({"key":"value"})", "application/json");

    // å¸¦ Headers çš„è¯·æ±‚
    httplib::Headers headers = {
        {"Authorization", "Bearer token"},
        {"User-Agent", "MyApp"}
    };
    res = client.Get("/headers", headers);

    return 0;
}</code></pre>

        <h3>HTTPS å®¢æˆ·ç«¯</h3>
        <pre><code>httplib::Client client("https://example.com");

// å¿½ç•¥ SSL éªŒè¯ï¼ˆä»…ç”¨äºæµ‹è¯•ï¼‰
client.enable_server_certificate_verification(false);

auto res = client.Get("/api/data");</code></pre>

        <h3>æ–‡ä»¶ä¸Šä¼ </h3>
        <pre><code>server.Post("/upload", [](const httplib::Request& req, httplib::Response& res) {
    auto size = req.files.size();
    std::string result = "Uploaded " + std::to_string(size) + " files\n";

    for (const auto& file : req.files) {
        result += file.first + ": " + file.second.filename + "\n";
    }

    res.set_content(result, "text/plain");
});</code></pre>

        <h3>å¼‚å¸¸å¤„ç†</h3>
        <pre><code>server.set_exception_handler([](const httplib::Request& req, httplib::Response& res, std::exception_ptr eptr) {
    try {
        if (eptr) std::rethrow_exception(eptr);
    } catch (const std::exception& e) {
        res.set_content(e.what(), "text/plain");
        res.status = 500;
    }
});

// é”™è¯¯å¤„ç†å™¨
server.set_error_handler([](const httplib::Request& req, httplib::Response& res) {
    auto fmt = "<p>Error Status: <span style='color:red;'>%d</span></p>";
    char buf[BUFSIZ];
    snprintf(buf, sizeof(buf), fmt, res.status);
    res.set_content(buf, "text/html");
});</code></pre>

        <h2>ğŸ¯ å¸¸è§è·¯ç”±æ¨¡å¼</h2>
        <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
            <tr style="background: rgba(106, 183, 255, 0.2);">
                <th style="padding: 12px; text-align: left; color: #6ab7ff;">æ–¹æ³•</th>
                <th style="padding: 12px; text-align: left; color: #6ab7ff;">æ¨¡å¼</th>
                <th style="padding: 12px; text-align: left; color: #6ab7ff;">è¯´æ˜</th>
            </tr>
            <tr>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);"><code>server.Get()</code></td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);">è·å–</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);">GET è¯·æ±‚</td>
            </tr>
            <tr>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);"><code>server.Post()</code></td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);">åˆ›å»º</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);">POST è¯·æ±‚</td>
            </tr>
            <tr>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);"><code>server.Put()</code></td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);">æ›´æ–°</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);">PUT è¯·æ±‚</td>
            </tr>
            <tr>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);"><code>server.Delete()</code></td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);">åˆ é™¤</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);">DELETE è¯·æ±‚</td>
            </tr>
            <tr>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);"><code>server.Patch()</code></td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);">éƒ¨åˆ†æ›´æ–°</td>
                <td style="padding: 10px; border-bottom: 1px solid rgba(100, 150, 255, 0.1);">PATCH è¯·æ±‚</td>
            </tr>
            <tr>
                <td style="padding: 10px;"><code>R"(/path/(\\d+))"</code></td>
                <td style="padding: 10px;">æ­£åˆ™è·¯å¾„</td>
                <td style="padding: 10px;">æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</td>
            </tr>
        </table>

        <h2>ğŸ“š æ›´å¤šèµ„æº</h2>
        <ul>
            <li><a href="https://github.com/yhirose/cpp-httplib" target="_blank">GitHub ä»“åº“</a></li>
            <li><a href="https://github.com/yhirose/cpp-httplib/blob/master/README.md" target="_blank">å®˜æ–¹æ–‡æ¡£</a></li>
        </ul>

        <!-- é¡µè„š -->
        <footer>
            <p class="footer-text">&copy; 2026 C++ å¼€æºåº“ç²¾é€‰åŸºåœ°. ç‰ˆæƒæ‰€æœ‰Â·LEVI</p>
            <p class="footer-text">å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»: <a href="mailto:373102227@qq.com" class="contact-link">373102227@qq.com</a></p>
        </footer>
    </div>
</body>
</html>