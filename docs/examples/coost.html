<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>coost ä½¿ç”¨æŒ‡å—</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0f0c29;
            background-image: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: #e0e0ff;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(20, 20, 40, 0.8);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(100, 150, 255, 0.3);
        }

        h1 {
            color: #4cd1a8;
            text-shadow: 0 0 10px rgba(76, 209, 168, 0.5);
            border-bottom: 3px solid #4cd1a8;
            padding-bottom: 10px;
            margin-top: 0;
        }

        h2 {
            color: #ff9f7f;
            margin-top: 40px;
        }

        h3 {
            color: #a0a0ff;
            margin-top: 30px;
        }

        p {
            color: #d0d0ff;
        }

        pre {
            background-color: #1a1a2e;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            border-left: 4px solid #4cd1a8;
            margin: 15px 0;
        }

        code {
            font-family: 'Courier New', monospace;
            color: #a0ffa0;
            font-size: 0.95em;
        }

        .back-link {
            position: fixed;
            right: 30px;
            top: 30px;
            z-index: 1000;
            color: #4cd1a8;
            text-decoration: none;
            font-weight: bold;
            padding: 12px 24px;
            background-color: rgba(76, 209, 168, 0.15);
            border: 2px solid rgba(76, 209, 168, 0.3);
            border-radius: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .back-link:hover {
            background-color: rgba(76, 209, 168, 0.25);
            border-color: rgba(76, 209, 168, 0.5);
            box-shadow: 0 6px 20px rgba(76, 209, 168, 0.4);
            transform: translateY(-2px);
        }

        .warning {
            background-color: rgba(255, 159, 127, 0.1);
            border-left: 4px solid #ff9f7f;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .note {
            background-color: rgba(76, 209, 168, 0.1);
            border-left: 4px solid #4cd1a8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(76, 209, 168, 0.3);
            text-align: center;
        }

        .footer-text {
            color: #a0a0ff;
            font-size: 0.9em;
            margin: 5px 0;
        }

        .contact-link {
            color: #4cd1a8;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .contact-link:hover {
            color: #ff9f7f;
            text-shadow: 0 0 5px rgba(255, 159, 127, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† è¿”å›ä¸»é¡µ</a>

        <h1>coost ä½¿ç”¨æŒ‡å—</h1>

        <p>coost æ˜¯ä¸€ä¸ªç°ä»£ C++ åç¨‹åº“ï¼Œæä¾›è½»é‡çº§çš„åç¨‹å®ç°ã€é«˜æ€§èƒ½è°ƒåº¦å™¨å’Œä¸°å¯Œçš„åŒæ­¥åŸè¯­ã€‚å®ƒä½¿ C++ ä¸­çš„å¼‚æ­¥ç¼–ç¨‹å˜å¾—æ›´åŠ ç®€æ´ï¼ŒåŒæ—¶ä¿æŒäº†é«˜æ€§èƒ½ã€‚</p>

        <h2>ğŸ“¦ å®‰è£…</h2>

        <h3>ä» GitHub è·å–</h3>
        <pre><code>git clone https://github.com/idealvin/coost.git
cd coost
mkdir build && cd build
cmake ..
cmake --build .</code></pre>

        <h3>ä½¿ç”¨ CMake é›†æˆ</h3>
        <pre><code>find_package(coost REQUIRED)
target_link_libraries(your_target PRIVATE coost::co)</code></pre>

        <h2>ğŸš€ åŸºç¡€ä½¿ç”¨</h2>

        <h3>Hello World åç¨‹</h3>
        <pre><code>#include "co/co.h"

int main() {
    // å¯åŠ¨åç¨‹
    go([](){
        std::cout &lt;&lt; "Hello from coroutine!" &lt;&lt; std::endl;
    });

    // ç­‰å¾…æ‰€æœ‰åç¨‹æ‰§è¡Œå®Œæ¯•
    co::sleep(100);
    return 0;
}</code></pre>

        <h3>åç¨‹è°ƒåº¦</h3>
        <pre><code>#include "co/co.h"

int main() {
    // åˆ›å»ºå¤šä¸ªåç¨‹
    for (int i = 0; i &lt; 5; i++) {
        go([i](){
            co::sleep(100 * (i + 1));
            std::cout &lt;&lt; "Coroutine " &lt;&lt; i &lt;&lt; " finished" &lt;&lt; std::endl;
        });
    }

    // ç­‰å¾…æ‰€æœ‰åç¨‹æ‰§è¡Œå®Œæ¯•
    co::sleep(1000);
    return 0;
}</code></pre>

        <h2>ğŸ”„ åç¨‹åŒæ­¥</h2>

        <h3>ä½¿ç”¨ Channel é€šä¿¡</h3>
        <pre><code>#include "co/co.h"

void producer(co::chan&lt;int&gt;& ch) {
    for (int i = 0; i &lt; 5; i++) {
        ch &lt;&lt; i;
        std::cout &lt;&lt; "Produced: " &lt;&lt; i &lt;&lt; std::endl;
        co::sleep(100);
    }
    ch.close();
}

void consumer(co::chan&lt;int&gt;& ch) {
    int v;
    while (ch &gt;&gt; v) {
        std::cout &lt;&lt; "Consumed: " &lt;&lt; v &lt;&lt; std::endl;
    }
}

int main() {
    co::chan&lt;int&gt; ch(32);
    go(producer, ch);
    go(consumer, ch);

    co::sleep(1000);
    return 0;
}</code></pre>

        <h3>ä½¿ç”¨ Mutex å’Œ WaitGroup</h3>
        <pre><code>#include "co/co.h"

co::Mutex g_mutex;
int g_counter = 0;

void increment() {
    for (int i = 0; i &lt; 100; i++) {
        co::MutexGuard g(g_mutex);
        g_counter++;
    }
}

int main() {
    co::WaitGroup wg;

    for (int i = 0; i &lt; 10; i++) {
        wg.add(1);
        go([&wg](){
            increment();
            wg.done();
        });
    }

    wg.wait();
    std::cout &lt;&lt; "Counter: " &lt;&lt; g_counter &lt;&lt; std::endl;
    return 0;
}</code></pre>

        <h2>ğŸŒ ç½‘ç»œ I/O</h2>

        <h3>TCP å®¢æˆ·ç«¯</h3>
        <pre><code>#include "co/co.h"

void tcp_client() {
    auto conn = co::tcp_connect("127.0.0.1", 8888, 3000);
    if (!conn) {
        std::cout &lt;&lt; "Connection failed" &lt;&lt; std::endl;
        return;
    }

    // å‘é€æ•°æ®
    const char* msg = "Hello, Server!";
    int n = conn-&gt;send(msg, strlen(msg));
    std::cout &lt;&lt; "Sent: " &lt;&lt; n &lt;&lt; " bytes" &lt;&lt; std::endl;

    // æ¥æ”¶æ•°æ®
    char buf[1024];
    n = conn-&gt;recv(buf, sizeof(buf));
    if (n &gt; 0) {
        buf[n] = '\0';
        std::cout &lt;&lt; "Received: " &lt;&lt; buf &lt;&lt; std::endl;
    }
}

int main() {
    go(tcp_client);
    co::sleep(2000);
    return 0;
}</code></pre>

        <h3>TCP æœåŠ¡å™¨</h3>
        <pre><code>#include "co/co.h"

void handle_connection(int fd) {
    char buf[1024];
    while (true) {
        int n = co::recv(fd, buf, sizeof(buf));
        if (n &lt;= 0) break;

        buf[n] = '\0';
        std::cout &lt;&lt; "Received: " &lt;&lt; buf &lt;&lt; std::endl;

        // å›æ˜¾æ•°æ®
        co::send(fd, buf, n);
    }
    close(fd);
}

void tcp_server() {
    co::tcp_server("127.0.0.1", 8888, handle_connection);
}

int main() {
    go(tcp_server);
    std::cout &lt;&lt; "Server started on port 8888" &lt;&lt; std::endl;

    co::sleep(60000);  // è¿è¡Œ60ç§’
    return 0;
}</code></pre>

        <h2>â±ï¸ å®šæ—¶å™¨å’Œç¡çœ </h2>

        <pre><code>#include "co/co.h"

void timer_example() {
    for (int i = 0; i &lt; 5; i++) {
        std::cout &lt;&lt; "Tick: " &lt;&lt; i &lt;&lt; std::endl;
        co::sleep(500);  // ç¡çœ 500ms
    }
}

void delay_example() {
    co::sleep(1000);
    std::cout &lt;&lt; "Delayed 1 second" &lt;&lt; std::endl;
}

int main() {
    go(timer_example);
    go(delay_example);

    co::sleep(3000);
    return 0;
}</code></pre>

        <h2>ğŸ’¼ å®é™…åº”ç”¨ç¤ºä¾‹</h2>

        <h3>ç®€å•çš„ HTTP æœåŠ¡å™¨</h3>
        <pre><code>#include "co/co.h"

void http_server() {
    co::tcp_server("0.0.0.0", 8080, [](int fd) {
        char buf[4096];
        int n = co::recv(fd, buf, sizeof(buf));
        
        if (n &lt;= 0) {
            close(fd);
            return;
        }

        std::string response = 
            "HTTP/1.1 200 OK\r\n"
            "Content-Type: text/plain\r\n"
            "Content-Length: 12\r\n"
            "\r\n"
            "Hello World!";
        
        co::send(fd, response.c_str(), response.length());
        close(fd);
    });
}

int main() {
    go(http_server);
    std::cout &lt;&lt; "HTTP server started on port 8080" &lt;&lt; std::endl;

    co::sleep(60000);
    return 0;
}</code></pre>

        <h2>ğŸ“‹ å¸¸ç”¨ API é€ŸæŸ¥</h2>

        <table>
            <thead>
                <tr>
                    <th>API</th>
                    <th>è¯´æ˜</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>go(f, args...)</code></td>
                    <td>åˆ›å»ºå¹¶å¯åŠ¨åç¨‹</td>
                </tr>
                <tr>
                    <td><code>co::sleep(ms)</code></td>
                    <td>åç¨‹ç¡çœ ï¼ˆæ¯«ç§’ï¼‰</td>
                </tr>
                <tr>
                    <td><code>co::chan&lt;T&gt;</code></td>
                    <td>åç¨‹é—´é€šä¿¡é€šé“</td>
                </tr>
                <tr>
                    <td><code>co::Mutex</code></td>
                    <td>åç¨‹äº’æ–¥é”</td>
                </tr>
                <tr>
                    <td><code>co::WaitGroup</code></td>
                    <td>ç­‰å¾…ç»„</td>
                </tr>
                <tr>
                    <td><code>co::Event</code></td>
                    <td>äº‹ä»¶</td>
                </tr>
                <tr>
                    <td><code>co::tcp_connect</code></td>
                    <td>TCP å®¢æˆ·ç«¯è¿æ¥</td>
                </tr>
                <tr>
                    <td><code>co::tcp_server</code></td>
                    <td>TCP æœåŠ¡å™¨</td>
                </tr>
            </tbody>
        </table>

        <div class="note">
            <strong>ğŸ’¡ æç¤ºï¼š</strong> coost çš„åç¨‹æ˜¯ç”¨æˆ·æ€åç¨‹ï¼Œåˆ‡æ¢å¼€é”€è¿œå°äºçº¿ç¨‹åˆ‡æ¢ï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯ã€‚åç¨‹åœ¨é‡åˆ°é˜»å¡æ“ä½œæ—¶è‡ªåŠ¨è®©å‡º CPUã€‚
        </div>

        <div class="warning">
            <strong>âš ï¸ æ³¨æ„ï¼š</strong> 
            <ul>
                <li>åç¨‹ä»£ç ä¸­ä¸è¦ä½¿ç”¨ä¼ ç»Ÿçš„é˜»å¡å‡½æ•°ï¼ˆå¦‚ sleepï¼‰</li>
                <li>ä½¿ç”¨ coost æä¾›çš„åç¨‹ç‰ˆæœ¬ I/O å‡½æ•°</li>
                <li>åç¨‹é—´å…±äº«æ•°æ®æ—¶æ³¨æ„åŒæ­¥</li>
            </ul>
        </div>

        <h2>ğŸ”— å‚è€ƒèµ„æ–™</h2>
        <ul>
            <li><a href="https://github.com/idealvin/coost" target="_blank" style="color: #4cd1a8;">coost GitHub</a></li>
        </ul>

        <!-- é¡µè„š -->
        <footer>
            <p class="footer-text">&copy; 2026 C++ å¼€æºåº“ç²¾é€‰åŸºåœ°. ç‰ˆæƒæ‰€æœ‰Â·LEVI</p>
            <p class="footer-text">å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»: <a href="mailto:373102227@qq.com" class="contact-link">373102227@qq.com</a> æˆ– <a href="mailto:liweixs@gmail.com" class="contact-link">liweixs@gmail.com</a></p>
        </footer>
    </div>
</body>
</html>
