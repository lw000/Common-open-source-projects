<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>leveldb ä½¿ç”¨æŒ‡å—</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0f0c29;
            background-image: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: #e0e0ff;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(20, 20, 40, 0.8);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(100, 150, 255, 0.3);
        }

        h1 {
            color: #4cd1a8;
            text-shadow: 0 0 10px rgba(76, 209, 168, 0.5);
            border-bottom: 3px solid #4cd1a8;
            padding-bottom: 10px;
            margin-top: 0;
        }

        h2 {
            color: #ff9f7f;
            margin-top: 40px;
        }

        h3 {
            color: #a0a0ff;
            margin-top: 30px;
        }

        p {
            color: #d0d0ff;
        }

        pre {
            background-color: #1a1a2e;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            border-left: 4px solid #4cd1a8;
            margin: 15px 0;
        }

        code {
            font-family: 'Courier New', monospace;
            color: #a0ffa0;
            font-size: 0.95em;
        }

        .back-link {
            position: fixed;
            right: 30px;
            top: 30px;
            z-index: 1000;
            color: #4cd1a8;
            text-decoration: none;
            font-weight: bold;
            padding: 12px 24px;
            background-color: rgba(76, 209, 168, 0.15);
            border: 2px solid rgba(76, 209, 168, 0.3);
            border-radius: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .back-link:hover {
            background-color: rgba(76, 209, 168, 0.25);
            border-color: rgba(76, 209, 168, 0.5);
            box-shadow: 0 6px 20px rgba(76, 209, 168, 0.4);
            transform: translateY(-2px);
        }

        .warning {
            background-color: rgba(255, 159, 127, 0.1);
            border-left: 4px solid #ff9f7f;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .note {
            background-color: rgba(76, 209, 168, 0.1);
            border-left: 4px solid #4cd1a8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(76, 209, 168, 0.3);
            text-align: center;
        }

        .footer-text {
            color: #a0a0ff;
            font-size: 0.9em;
            margin: 5px 0;
        }

        .contact-link {
            color: #4cd1a8;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .contact-link:hover {
            color: #ff9f7f;
            text-shadow: 0 0 5px rgba(255, 159, 127, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">â† è¿”å›ä¸»é¡µ</a>

        <h1>leveldb ä½¿ç”¨æŒ‡å—</h1>

        <p>leveldb æ˜¯ Google å¼€å‘çš„ä¸€ä¸ªé«˜æ€§èƒ½ã€è½»é‡çº§çš„åµŒå…¥å¼é”®å€¼å­˜å‚¨åº“ï¼Œæä¾›äº†å¿«é€Ÿçš„éšæœºè¯»å†™æ“ä½œå’Œé«˜æ•ˆçš„å‹ç¼©ã€‚å®ƒè¢«å¹¿æ³›åº”ç”¨äº Chrome æµè§ˆå™¨ã€LevelDB ç­‰é¡¹ç›®ä¸­ã€‚</p>

        <h2>ğŸ“¦ å®‰è£…</h2>

        <h3>Ubuntu/Debian</h3>
        <pre><code>sudo apt-get install libleveldb-dev</code></pre>

        <h3>ä» GitHub ç¼–è¯‘</h3>
        <pre><code>git clone https://github.com/google/leveldb.git
cd leveldb
mkdir build && cd build
cmake ..
cmake --build .
sudo make install</code></pre>

        <h2>ğŸš€ åŸºç¡€ä½¿ç”¨</h2>

        <h3>æ‰“å¼€/åˆ›å»ºæ•°æ®åº“</h3>
        <pre><code>#include &lt;leveldb/db.h&gt;
#include &lt;iostream&gt;

int main() {
    leveldb::DB* db;
    leveldb::Options options;
    options.create_if_missing = true;

    // æ‰“å¼€æˆ–åˆ›å»ºæ•°æ®åº“
    leveldb::Status status = leveldb::DB::Open(options, "./testdb", &db);
    
    if (!status.ok()) {
        std::cerr &lt;&lt; "Unable to open/create database: " &lt;&lt; status.ToString() &lt;&lt; std::endl;
        return 1;
    }

    std::cout &lt;&lt; "Database opened successfully" &lt;&lt; std::endl;

    // å…³é—­æ•°æ®åº“
    delete db;
    return 0;
}</code></pre>

        <h3>å†™å…¥å’Œè¯»å–</h3>
        <pre><code>#include &lt;leveldb/db.h&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;

int main() {
    leveldb::DB* db;
    leveldb::Options options;
    options.create_if_missing = true;

    leveldb::DB::Open(options, "./testdb", &db);

    // å†™å…¥æ•°æ®
    std::string key = "user:1001";
    std::string value = "{\"name\":\"Alice\",\"age\":25}";
    
    leveldb::Status status = db-&gt;Put(leveldb::WriteOptions(), key, value);
    
    if (!status.ok()) {
        std::cerr &lt;&lt; "Put failed: " &lt;&lt; status.ToString() &lt;&lt; std::endl;
    } else {
        std::cout &lt;&lt; "Data written successfully" &lt;&lt; std::endl;
    }

    // è¯»å–æ•°æ®
    std::string result;
    status = db-&gt;Get(leveldb::ReadOptions(), key, &result);
    
    if (status.ok()) {
        std::cout &lt;&lt; "Read: " &lt;&lt; result &lt;&lt; std::endl;
    } else if (status.IsNotFound()) {
        std::cout &lt;&lt; "Key not found" &lt;&lt; std::endl;
    }

    delete db;
    return 0;
}</code></pre>

        <h3>åˆ é™¤æ•°æ®</h3>
        <pre><code>#include &lt;leveldb/db.h&gt;
#include &lt;iostream&gt;

int main() {
    leveldb::DB* db;
    leveldb::Options options;
    options.create_if_missing = true;

    leveldb::DB::Open(options, "./testdb", &db);

    // å†™å…¥æ•°æ®
    db-&gt;Put(leveldb::WriteOptions(), "temp_key", "temp_value");

    // åˆ é™¤æ•°æ®
    leveldb::Status status = db-&gt;Delete(leveldb::WriteOptions(), "temp_key");
    
    if (status.ok()) {
        std::cout &lt;&lt; "Data deleted successfully" &lt;&lt; std::endl;
    }

    // éªŒè¯åˆ é™¤
    std::string result;
    status = db-&gt;Get(leveldb::ReadOptions(), "temp_key", &result);
    
    if (status.IsNotFound()) {
        std::cout &lt;&lt; "Key deleted confirmed" &lt;&lt; std::endl;
    }

    delete db;
    return 0;
}</code></pre>

        <h2>ğŸ”§ æ‰¹é‡æ“ä½œ</h2>

        <h3>æ‰¹é‡å†™å…¥</h3>
        <pre><code>#include &lt;leveldb/db.h&gt;
#include &lt;iostream&gt;

int main() {
    leveldb::DB* db;
    leveldb::Options options;
    options.create_if_missing = true;

    leveldb::DB::Open(options, "./testdb", &db);

    // åˆ›å»ºæ‰¹é‡å†™å…¥å¯¹è±¡
    leveldb::WriteBatch batch;
    
    // æ·»åŠ å¤šä¸ªæ“ä½œ
    batch.Put("key1", "value1");
    batch.Put("key2", "value2");
    batch.Put("key3", "value3");
    batch.Delete("old_key");

    // æ‰§è¡Œæ‰¹é‡å†™å…¥
    leveldb::Status status = db-&gt;Write(leveldb::WriteOptions(), &batch);
    
    if (status.ok()) {
        std::cout &lt;&lt; "Batch write successful" &lt;&lt; std::endl;
    }

    delete db;
    return 0;
}</code></pre>

        <h2>ğŸ“– éå†æ•°æ®</h2>

        <h3>èŒƒå›´æŸ¥è¯¢</h3>
        <pre><code>#include &lt;leveldb/db.h&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;

int main() {
    leveldb::DB* db;
    leveldb::Options options;
    options.create_if_missing = true;

    leveldb::DB::Open(options, "./testdb", &db);

    // å†™å…¥ä¸€äº›æ•°æ®
    for (int i = 0; i &lt; 10; i++) {
        db-&gt;Put(leveldb::WriteOptions(), "key" + std::to_string(i), "value" + std::to_string(i));
    }

    // åˆ›å»ºè¿­ä»£å™¨
    leveldb::Iterator* it = db-&gt;NewIterator(leveldb::ReadOptions());

    // éå†æ‰€æœ‰æ•°æ®
    std::cout &lt;&lt; "All data:" &lt;&lt; std::endl;
    for (it-&gt;SeekToFirst(); it-&gt;Valid(); it-&gt;Next()) {
        std::cout &lt;&lt; "  " &lt;&lt; it-&gt;key().ToString() 
                  &lt;&lt; " : " &lt;&lt; it-&gt;value().ToString() &lt;&lt; std::endl;
    }

    // éå†èŒƒå›´
    std::cout &lt;&lt; "\nRange query (key2 to key5):" &lt;&lt; std::endl;
    for (it-&gt;Seek("key2"); it-&gt;Valid() && it-&gt;key().ToString() &lt;= "key5"; it-&gt;Next()) {
        std::cout &lt;&lt; "  " &lt;&lt; it-&gt;key().ToString() 
                  &lt;&lt; " : " &lt;&lt; it-&gt;value().ToString() &lt;&lt; std::endl;
    }

    delete it;
    delete db;
    return 0;
}</code></pre>

        <h2>âš™ï¸ é«˜çº§é…ç½®</h2>

        <h3>å‹ç¼©å’Œç¼“å­˜è®¾ç½®</h3>
        <pre><code>#include &lt;leveldb/db.h&gt;
#include &lt;leveldb/cache.h&gt;
#include &lt;iostream&gt;

int main() {
    leveldb::DB* db;
    leveldb::Options options;
    
    // åˆ›å»º 100MB çš„å—ç¼“å­˜
    options.block_cache = leveldb::NewLRUCache(100 * 1024 * 1024);
    
    // å¯ç”¨å‹ç¼©
    options.compression = leveldb::kSnappyCompression;
    
    // å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨åˆ™åˆ›å»º
    options.create_if_missing = true;

    leveldb::DB::Open(options, "./testdb", &db);

    // ä½¿ç”¨æ•°æ®åº“...

    // æ¸…ç†
    delete db;
    delete options.block_cache;
    
    return 0;
}</code></pre>

        <h3>å¿«ç…§</h3>
        <pre><code>#include &lt;leveldb/db.h&gt;
#include &lt;iostream&gt;

int main() {
    leveldb::DB* db;
    leveldb::Options options;
    options.create_if_missing = true;

    leveldb::DB::Open(options, "./testdb", &db);

    // å†™å…¥ä¸€äº›æ•°æ®
    db-&gt;Put(leveldb::WriteOptions(), "key1", "value1");
    db-&gt;Put(leveldb::WriteOptions(), "key2", "value2");

    // åˆ›å»ºå¿«ç…§
    const leveldb::Snapshot* snapshot = db-&gt;GetSnapshot();

    // ç»§ç»­å†™å…¥æ•°æ®
    db-&gt;Put(leveldb::WriteOptions(), "key1", "new_value1");

    // ä»å¿«ç…§è¯»å–ï¼ˆè¯»å–çš„æ˜¯å¿«ç…§æ—¶çš„æ•°æ®ï¼‰
    leveldb::ReadOptions read_options;
    read_options.snapshot = snapshot;
    
    std::string value;
    db-&gt;Get(read_options, "key1", &value);
    std::cout &lt;&lt; "From snapshot: " &lt;&lt; value &lt;&lt; std::endl;  // value1

    // é‡Šæ”¾å¿«ç…§
    db-&gt;ReleaseSnapshot(snapshot);

    delete db;
    return 0;
}</code></pre>

        <h2>ğŸ’¼ å®é™…åº”ç”¨ç¤ºä¾‹</h2>

        <h3>ç®€å•çš„ KV å°è£…</h3>
        <pre><code>#include &lt;leveldb/db.h&gt;
#include &lt;string&gt;
#include &lt;iostream&gt;

class LevelDBWrapper {
private:
    leveldb::DB* db_;

public:
    LevelDBWrapper(const std::string& path) : db_(nullptr) {
        leveldb::Options options;
        options.create_if_missing = true;

        leveldb::Status status = leveldb::DB::Open(options, path, &db_);
        
        if (!status.ok()) {
            std::cerr &lt;&lt; "Failed to open database: " &lt;&lt; status.ToString() &lt;&lt; std::endl;
        }
    }

    ~LevelDBWrapper() {
        if (db_) {
            delete db_;
        }
    }

    bool put(const std::string& key, const std::string& value) {
        leveldb::Status status = db_-&gt;Put(leveldb::WriteOptions(), key, value);
        return status.ok();
    }

    bool get(const std::string& key, std::string& value) {
        leveldb::Status status = db_-&gt;Get(leveldb::ReadOptions(), key, &value);
        return status.ok();
    }

    bool del(const std::string& key) {
        leveldb::Status status = db_-&gt;Delete(leveldb::WriteOptions(), key);
        return status.ok();
    }

    bool exists(const std::string& key) {
        std::string value;
        leveldb::Status status = db_-&gt;Get(leveldb::ReadOptions(), key, &value);
        return status.ok() && !status.IsNotFound();
    }
};

int main() {
    LevelDBWrapper db("./mydb");

    // å†™å…¥
    db.put("name", "Alice");
    db.put("age", "25");

    // è¯»å–
    std::string name;
    if (db.get("name", name)) {
        std::cout &lt;&lt; "Name: " &lt;&lt; name &lt;&lt; std::endl;
    }

    // æ£€æŸ¥å­˜åœ¨
    if (db.exists("name")) {
        std::cout &lt;&lt; "Key 'name' exists" &lt;&lt; std::endl;
    }

    // åˆ é™¤
    db.del("age");

    return 0;
}</code></pre>

        <h2>ğŸ“‹ å¸¸ç”¨é€‰é¡¹é€ŸæŸ¥</h2>

        <table>
            <thead>
                <tr>
                    <th>é€‰é¡¹</th>
                    <th>ç±»å‹</th>
                    <th>è¯´æ˜</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>create_if_missing</code></td>
                    <td>bool</td>
                    <td>å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨åˆ™åˆ›å»º</td>
                </tr>
                <tr>
                    <td><code>error_if_exists</code></td>
                    <td>bool</td>
                    <td>å¦‚æœæ•°æ®åº“å·²å­˜åœ¨åˆ™æŠ¥é”™</td>
                </tr>
                <tr>
                    <td><code>paranoid_checks</code></td>
                    <td>bool</td>
                    <td>å¯ç”¨ä¸¥æ ¼æ£€æŸ¥ï¼ˆå¢åŠ å¼€é”€ï¼‰</td>
                </tr>
                <tr>
                    <td><code>write_buffer_size</code></td>
                    <td>size_t</td>
                    <td>å†™å…¥ç¼“å†²åŒºå¤§å°ï¼ˆé»˜è®¤4MBï¼‰</td>
                </tr>
                <tr>
                    <td><code>max_open_files</code></td>
                    <td>int</td>
                    <td>æœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°</td>
                </tr>
                <tr>
                    <td><code>block_cache</code></td>
                    <td>Cache*</td>
                    <td>å—ç¼“å­˜å¯¹è±¡</td>
                </tr>
                <tr>
                    <td><code>compression</code></td>
                    <td>CompressionType</td>
                    <td>å‹ç¼©ç±»å‹ï¼ˆkNoCompression/kSnappyCompressionï¼‰</td>
                </tr>
            </tbody>
        </table>

        <div class="note">
            <strong>ğŸ’¡ æç¤ºï¼š</strong> LevelDB æŒ‰é”®æ’åºå­˜å‚¨æ•°æ®ï¼Œåˆ©ç”¨è¿™ä¸€ç‰¹æ€§å¯ä»¥è¿›è¡Œé«˜æ•ˆçš„èŒƒå›´æŸ¥è¯¢ã€‚æ•°æ®åœ¨ç£ç›˜ä¸Šæ˜¯æŒ‰é”®çš„å­—å…¸åºç»„ç»‡çš„ã€‚
        </div>

        <div class="warning">
            <strong>âš ï¸ æ³¨æ„ï¼š</strong> 
            <ul>
                <li>LevelDB ä¸æ”¯æŒå¤šè¿›ç¨‹å¹¶å‘å†™å…¥</li>
                <li>éœ€è¦æ­£ç¡®é‡Šæ”¾ DB å¯¹è±¡å’Œè¿­ä»£å™¨</li>
                <li>å‹ç¼©éœ€è¦é“¾æ¥ Snappy åº“</li>
                <li>ä¸æ”¯æŒ SQL æŸ¥è¯¢ï¼Œä»…æ”¯æŒé”®å€¼æ“ä½œ</li>
            </ul>
        </div>

        <h2>ğŸ”— å‚è€ƒèµ„æ–™</h2>
        <ul>
            <li><a href="https://github.com/google/leveldb" target="_blank" style="color: #4cd1a8;">LevelDB GitHub</a></li>
            <li><a href="https://github.com/google/leveldb/blob/master/doc/index.md" target="_blank" style="color: #4cd1a8;">å®˜æ–¹æ–‡æ¡£</a></li>
        </ul>

        <!-- é¡µè„š -->
        <footer>
            <p class="footer-text">&copy; 2026 C++ å¼€æºåº“ç²¾é€‰åŸºåœ°. ç‰ˆæƒæ‰€æœ‰Â·LEVI</p>
            <p class="footer-text">å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»: <a href="mailto:373102227@qq.com" class="contact-link">373102227@qq.com</a> æˆ– <a href="mailto:liweixs@gmail.com" class="contact-link">liweixs@gmail.com</a></p>
        </footer>
    </div>
</body>
</html>
